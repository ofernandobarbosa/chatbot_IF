version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- affirm
- bot_challenge
- deny
- goodbye
- greet
- request_doc_register
- request_to_register
- request_historic
- request_email
- inform_matricula
- inform_professor_name

# - faq:
#   is_retrieval_intent_: true

- inform_name:
    ignore_entities:
    - LOC

entities:
- PER
- LOC
- matricula

slots:
  name:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: PER
      conditions:
      - active_loop: name_form

  matricula:
    type: text
    mappings: 
    - type: from_entity
      entity: matricula
      not_intent: greet
      conditions:
      - active_loop: name_form
  
  professor_name:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: PER
      conditions:
      - active_loop: professor_name_form

forms:
  name_form:
    required_slots:
    - name
    - matricula
  professor_name_form:
    required_slots:
    - professor_name

responses:
  utter_greet:
  - text: |-
      Eai, seja bem-vindo :)
      Qual seu nome?
  - text: |-
      Olá, seja bem-vindo :)
      Qual seu nome?
  utter_ask_name:
  - text: Você poderia informar seu nome?
  utter_ask_professor_name:
  - text: Você poderia informar o nome do professor?
  utter_ask_help:
  - text: Em que posso ajudar {name}?
  utter_ask_matricula:
  - text: Você poderia informar sua matricula?
  utter_goodbye:
  - text: Tchau
  - text: Até logo :)
  utter_iamabot:
  - text: I am a bot, powered by Rasa.
  utter_ask_professor:
  - text: |-
      Qual o nome do professor?
      Me informa o nome do professor?
actions:
- utter_ask_help
- utter_goodbye
- utter_greet
- utter_ask_matricula
# custom action
- action_buscar_professor
- action_faq_comprovate
